!function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(t){t.fn.cssTransition=function(t){return this.css({"-webkit-transition":t,"-moz-transition":t,"-ms-transition":t,"-o-transition":t,transition:t})},t.widget("nmk.productSlider",{options:{previewHeight:450,slideWidth:300,navbarHeight:150,animationTime:400,autoplay:3e3,stopOnMouseHover:!0,delayOnClick:2e3},props:{selected:void 0,sliderContainer:void 0,sliderBackground:void 0,sliderBar:void 0,products:void 0,timerDelaied:!1,carouselTimer:void 0},_create:function(){this._update(),this.props.sliderContainer.on("mouseenter",()=>{this.options.stopOnMouseHover&&this._stopCarousel()}),this.props.sliderContainer.on("mouseleave",()=>{(this.options.stopOnMouseHover||void 0===this.props.carouselTimer)&&this._startCarousel()})},_startCarousel:function(t){void 0===t&&(t=0),this.props.autoplay<=0||(void 0!==this.props.carouselTimer&&this._stopCarousel(),this.props.carouselTimer=setTimeout(()=>{const t=(this.props.selected+1)%this.props.products.length;this._deactivateNavElement(this.props.selected),this._activateNavElement(t),this._startCarousel()},this.options.autoplay+t))},_stopCarousel:function(){this.props.carouselTimer=clearTimeout(this.props.carouselTimer)},_setOption:function(t,i){this.options[t]=i,this._update()},_update:function(){this._collectProducts(),this._createSliderContainer(),this._createSliderBar(),this.element.after(this.props.sliderContainer,this.props.sliderBar),this.props.sliderBar.on("click","a",t=>{const i=t.currentTarget;this._handleNavClick(t,i)}),this._activateNavElement(0),this._trigger("onInitialized",null,Object.assign({},this.props.products)),this._startCarousel()},_get_selected_product:function(){if(void 0!==this.props.selected)return this.props.products[this.props.selected]},_handleNavClick:function(i,e){i.preventDefault();const s=t(e).attr("id").split("-").pop();this._deactivateNavElement(this.props.selected),this._activateNavElement(s,i),this._startCarousel(this.options.delayOnClick)},_deactivateNavElement:function(t){this.props.sliderBar.find(`#slide-link-${t}`).removeClass("active"),this.props.sliderContainer.find(`#slide-${t}`).hide().removeClass("active"),this.props.sliderContainer.find(`#slide-description-${t}`).fadeOut(this.options.animationTime)},_activateNavElement:function(t,i){void 0===i&&(i=null);const e=this._get_selected_product(),s=void 0===e?0:this.options.animationTime;this.props.sliderBar.find(`#slide-link-${t}`).addClass("active"),this.props.sliderContainer.find(`#slide-${t}`).fadeIn(s).addClass("active"),this.props.sliderContainer.find(`#slide-description-${t}`).fadeIn(s),this.props.sliderContainer.find(".slider-background").css("background-image",`url("${this.props.products[t].url}")`),this.props.selected=t,this._trigger("onNavChanged",i,{before:e,current:this._get_selected_product()})},_createDiv:function(i){return t(document.createElement("div")).addClass(i)},_collectProducts:function(){this.props.products=[],this.element.find("> div").each((i,e)=>{"use strict";let s=t(e).find(".content").first();const r=t(e).find("img").first(),o=t(e).find("span").first();0===s.length&&(s=r);const n=r.attr("src");let a=void 0;if(0!==o.length)a=o.html();else if("A"===s.prop("tagName")){const t=s.attr("href"),i=r.attr("src").replace(/(.*)\/(.*)\.(.*?)$/,"$2");a=`<a href="${t}">${i}</a>`}else a=r.attr("src").replace(/(.*)\/(.*)\.(.*?)$/,"$2");this.props.products.push({id:i,url:n,content:s,description:a})})},_createSliderContainer:function(){this.props.sliderContainer=this._createDiv("slider-container").css("height",this.options.previewHeight);const i=(this.options.animationTime/1e3).toFixed(2);this.props.sliderBackground=this._createDiv("slider-background").cssTransition(`background-image ${i}s ease-out`);const e=this._createDiv("slider").css("width",this.options.slideWidth);this.props.products.forEach((i,s)=>{const r=this._createDiv("slide").attr("id",`slide-${s}`),o=t(document.createElement("span")).attr("id",`slide-description-${s}`).addClass("description").html(i.description);this.props.sliderContainer.append(o),r.append(i.content),e.append(r)}),this.props.sliderContainer.append(this.props.sliderBackground),this.props.sliderContainer.append(e)},_createSliderBar:function(){this.props.sliderBar=this._createDiv("slider-bar row").css("height",this.options.navbarHeight);const i=(this.options.animationTime/1e3).toFixed(2),e=Math.floor(12/this.props.products.length);this.props.products.forEach((s,r)=>{const o=this._createDiv(`slide-info col-${e} col-xs-${e}`).attr("id",r),n=t(document.createElement("a")).attr("href","#").attr("id",`slide-link-${r}`).cssTransition(`opacity ${i}s ease-out`).addClass("slide-link"),a=t(document.createElement("img")).attr("src",s.url);n.append(a),o.append(n),this.props.sliderBar.append(o)})}})});